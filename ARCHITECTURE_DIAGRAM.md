# ğŸ—ï¸ XHS Data Platform - å®Œæ•´æ¶æ„å›¾

## ğŸ“ ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·äº¤äº’å±‚ (Frontend)                          â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           Next.js 16.1 + TypeScript + Turbopack              â”‚  â”‚
â”‚  â”‚  - åˆ›ä½œè€…ç½‘ç»œå¯è§†åŒ–                                            â”‚  â”‚
â”‚  â”‚  - AI é£æ ¼ç”Ÿæˆç•Œé¢                                             â”‚  â”‚
â”‚  â”‚  - æ•°æ®åˆ†ææŠ¥è¡¨                                                â”‚  â”‚
â”‚  â”‚  Port: 3000                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ HTTP/REST
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API æœåŠ¡å±‚ (Backend)                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     FastAPI Server                            â”‚  â”‚
â”‚  â”‚  â”œâ”€ /api/styles/* - AI é£æ ¼ç”Ÿæˆæ¥å£                           â”‚  â”‚
â”‚  â”‚  â”œâ”€ /api/creators/* - åˆ›ä½œè€…æ•°æ®æ¥å£                          â”‚  â”‚
â”‚  â”‚  â””â”€ /docs - Swagger æ–‡æ¡£                                      â”‚  â”‚
â”‚  â”‚  Port: 5001                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  Service Layer (ä¸šåŠ¡é€»è¾‘å±‚)                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ StyleGenerationService                                    â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ DeepSeek AI é›†æˆ                                      â”‚  â”‚
â”‚  â”‚  â””â”€ CreatorAnalysisService (è§„åˆ’ä¸­)                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®è®¿é—®å±‚ (Database Layer)                       â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Repository Pattern (ä»“å‚¨æ¨¡å¼)                     â”‚  â”‚
â”‚  â”‚  â”œâ”€ UserProfileRepository                                     â”‚  â”‚
â”‚  â”‚  â”œâ”€ UserSnapshotRepository                                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ UserEmbeddingRepository                                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ CreatorNetworkRepository                                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ StylePromptRepository                                     â”‚  â”‚
â”‚  â”‚  â””â”€ PlatformConfigRepository                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚ (Database)                             â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               MongoDB Atlas (Cloud)                           â”‚  â”‚
â”‚  â”‚  Database: tikhub_xhs                                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ user_profiles       (8 æ–‡æ¡£)                              â”‚  â”‚
â”‚  â”‚  â”œâ”€ user_snapshots      (8 æ–‡æ¡£)                              â”‚  â”‚
â”‚  â”‚  â”œâ”€ user_embeddings     (8 æ–‡æ¡£, 512ç»´å‘é‡)                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ creator_networks    (1 æ–‡æ¡£, ç›¸ä¼¼åº¦çŸ©é˜µ)                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ style_prompts       (1 æ–‡æ¡£, AIæç¤ºè¯)                    â”‚  â”‚
â”‚  â”‚  â””â”€ platform_configs    (0 æ–‡æ¡£, é¢„ç•™)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å¤–éƒ¨æœåŠ¡é›†æˆ (External Services)                   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   TikHub API       â”‚  â”‚   DeepSeek AI      â”‚  â”‚ Embedding    â”‚  â”‚
â”‚  â”‚  æ•°æ®é‡‡é›†æœåŠ¡       â”‚  â”‚  å¤§è¯­è¨€æ¨¡å‹æœåŠ¡     â”‚  â”‚  å‘é‡åŒ–æœåŠ¡   â”‚  â”‚
â”‚  â”‚  (å°çº¢ä¹¦ç”¨æˆ·æ•°æ®)   â”‚  â”‚  (é£æ ¼ç”Ÿæˆ)        â”‚  â”‚  (BGE-small) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ•°æ®æµå›¾

### 1. æ•°æ®é‡‡é›†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TikHub API  â”‚  å°çº¢ä¹¦å¹³å°æ•°æ®æº
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. HTTP Request (ç”¨æˆ·ç¬”è®°æ•°æ®)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ tikhub-data-collector    â”‚  ç‹¬ç«‹æ•°æ®é‡‡é›†å·¥å…·
â”‚  test_user_tikhub.py     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 2. ä¿å­˜åŸå§‹æ•°æ®
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB Atlas           â”‚
â”‚  Collection:             â”‚
â”‚  - user_snapshots        â”‚  å­˜å‚¨ç”¨æˆ·å¿«ç…§
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ•°æ®å¤„ç†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB                 â”‚
â”‚  user_snapshots          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 3. è¯»å–å¹¶æ¸…æ´—
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  processors/clean_data.pyâ”‚  æ•°æ®æ¸…æ´—
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 4. å¤„ç†åæ•°æ®
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  processors/analyze.py   â”‚  LLM åˆ†æç”Ÿæˆç”¨æˆ·ç”»åƒ
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 5. ç”¨æˆ·ç”»åƒ
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB                 â”‚
â”‚  user_profiles           â”‚  å­˜å‚¨ç”¨æˆ·ç”»åƒ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. AI ç”Ÿæˆæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend                â”‚  ç”¨æˆ·è§¦å‘ç”Ÿæˆè¯·æ±‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 6. POST /api/styles/generate
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StyleGenerationService  â”‚  ä¸šåŠ¡é€»è¾‘å±‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 7. è·å–ç”¨æˆ·æ•°æ®
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UserProfileRepository   â”‚  æ•°æ®è®¿é—®å±‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 8. æŸ¥è¯¢æ•°æ®
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB                 â”‚
â”‚  user_profiles +         â”‚
â”‚  style_prompts           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 9. è¿”å›æ•°æ®
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StyleGenerationService  â”‚  æ„å»º Prompt
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 10. AI è¯·æ±‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DeepSeek AI API         â”‚  å¤§è¯­è¨€æ¨¡å‹
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 11. ç”Ÿæˆå†…å®¹
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend                â”‚  å±•ç¤ºç»“æœ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
xhs_data_Project/
â”‚
â”œâ”€â”€ ğŸ“ tikhub-data-collector/          # æ•°æ®é‡‡é›†å·¥å…·ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â”œâ”€â”€ test_user_tikhub.py            # TikHub API æ•°æ®é‡‡é›†
â”‚   â”œâ”€â”€ .env.example                   # é…ç½®æ¨¡æ¿
â”‚   â””â”€â”€ README.md                      # ä½¿ç”¨è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“ data-analysiter/                # æ ¸å¿ƒåç«¯æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ database/                   # æ•°æ®è®¿é—®å±‚ â­
â”‚   â”‚   â”œâ”€â”€ connection.py              # MongoDB è¿æ¥ç®¡ç†ï¼ˆå•ä¾‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ models.py                  # Pydantic æ•°æ®æ¨¡å‹ï¼ˆ6ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ repositories.py            # Repository ç±»ï¼ˆ6ä¸ªï¼‰
â”‚   â”‚   â””â”€â”€ migrate_data.py            # æ•°æ®è¿ç§»è„šæœ¬
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ api/                        # API å±‚ â­
â”‚   â”‚   â”œâ”€â”€ server.py                  # FastAPI ä¸»ç¨‹åº
â”‚   â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”‚   â”œâ”€â”€ style_router.py        # é£æ ¼ç”Ÿæˆè·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ creator_router.py      # åˆ›ä½œè€…æ•°æ®è·¯ç”±
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â””â”€â”€ style_service.py       # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ processors/                 # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ clean_data.py              # æ•°æ®æ¸…æ´—
â”‚   â”‚   â”œâ”€â”€ analyze.py                 # LLM åˆ†æ
â”‚   â”‚   â”œâ”€â”€ export_graph.py            # å¯¼å‡ºç½‘ç»œå›¾
â”‚   â”‚   â””â”€â”€ pipeline.py                # å®Œæ•´æµç¨‹ç¼–æ’
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ generators/                 # æ•°æ®ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ creators.py                # åˆ›ä½œè€…ç½‘ç»œç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ shots_merge.py             # æ•°æ®åˆå¹¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ tests/                      # æµ‹è¯•å’Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ test_embedding.py          # Embedding æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_user_tikhub.py        # TikHub é‡‡é›†æµ‹è¯•
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ docs/                       # æ–‡æ¡£ â­
â”‚   â”‚   â”œâ”€â”€ ARCHITECTURE.md            # æ¶æ„æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ QUICKSTART_V2.md           # å¿«é€Ÿå¼€å§‹
â”‚   â”‚   â”œâ”€â”€ API_USAGE.md               # API æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ MIGRATION_SUMMARY.md       # è¿ç§»è¯´æ˜
â”‚   â”‚   â””â”€â”€ COMMANDS.md                # å‘½ä»¤å‚è€ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ start.sh                       # å¯åŠ¨è„šæœ¬ï¼ˆè‡ªåŠ¨åŠ è½½.envï¼‰
â”‚   â”œâ”€â”€ .env.example                   # é…ç½®æ¨¡æ¿
â”‚   â”œâ”€â”€ requirements.txt               # Python ä¾èµ–
â”‚   â””â”€â”€ README.md                      # é¡¹ç›®è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“ xhs-analyser-frontend/          # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/                           # Next.js App Router
â”‚   â”œâ”€â”€ src/                           # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/                # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ lib/                       # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ styles/                    # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json                   # Node ä¾èµ–
â”‚   â””â”€â”€ README.md                      # å‰ç«¯è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“ MediaCrawler/                   # å¤‡ç”¨çˆ¬è™«å·¥å…·
â”‚   â””â”€â”€ ...                            # å¤šå¹³å°çˆ¬è™«
â”‚
â”œâ”€â”€ ğŸ“„ .env.example                    # å…¨å±€é…ç½®æ¨¡æ¿ â­
â”œâ”€â”€ ğŸ“„ .gitignore                      # Git å¿½ç•¥è§„åˆ™ â­
â”œâ”€â”€ ğŸ“„ security_check.sh               # å®‰å…¨æ£€æŸ¥è„šæœ¬ â­
â”œâ”€â”€ ğŸ“„ SECURITY_GUIDE.md               # å®‰å…¨æŒ‡å— â­
â”œâ”€â”€ ğŸ“„ GITHUB_UPLOAD_GUIDE.md          # ä¸Šä¼ æŒ‡å— â­
â”œâ”€â”€ ğŸ“„ ARCHITECTURE_DIAGRAM.md         # æœ¬æ–‡ä»¶ â­
â””â”€â”€ ğŸ“„ README.md                       # é¡¹ç›®æ€»è§ˆ â­
```

---

## ğŸ”Œ æŠ€æœ¯æ ˆè¯¦è§£

### Frontend (å‰ç«¯)
```yaml
æ¡†æ¶: Next.js 16.1.0
è¯­è¨€: TypeScript
æ„å»ºå·¥å…·: Turbopack
ç«¯å£: 3000
```

### Backend (åç«¯)
```yaml
æ¡†æ¶: FastAPI
è¯­è¨€: Python 3.9+
WebæœåŠ¡å™¨: Uvicorn
ç«¯å£: 5001
```

### Database (æ•°æ®åº“)
```yaml
æ•°æ®åº“: MongoDB Atlas (Cloud)
é©±åŠ¨: PyMongo
è¿æ¥æ–¹å¼: mongodb+srv://
æ•°æ®åº“å: tikhub_xhs
```

### AI Services (AI æœåŠ¡)
```yaml
LLM: DeepSeek API (OpenAI å…¼å®¹)
æ¨¡å‹: deepseek-chat
Embedding: BAAI/bge-small-zh-v1.5 (512ç»´)
```

### External APIs (å¤–éƒ¨ API)
```yaml
æ•°æ®æº: TikHub API
å¹³å°: å°çº¢ä¹¦ (XHS)
æœªæ¥æ”¯æŒ: Instagram, TikTok ç­‰
```

---

## ğŸ” ç¯å¢ƒå˜é‡é…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡

```bash
# MongoDB é…ç½®
MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/...
DATABASE_NAME=tikhub_xhs

# DeepSeek AI é…ç½®
DEEPSEEK_API_KEY=sk-your-api-key-here
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1  # å¯é€‰

# TikHub API é…ç½®
TIKHUB_TOKEN=Bearer your-token-here
TIKHUB_API_URL=https://api.tikhub.io/api/v1/xiaohongshu/web/get_user_notes_v2

# API æœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
API_HOST=0.0.0.0
API_PORT=5001
```

### é…ç½®æ–‡ä»¶ä½ç½®

```
.env                                  # å…¨å±€é…ç½®
data-analysiter/.env                  # åç«¯é…ç½®
tikhub-data-collector/.env            # é‡‡é›†å·¥å…·é…ç½®
```

âš ï¸ **é‡è¦**: `.env` æ–‡ä»¶ä¸ä¼šä¸Šä¼ åˆ° Gitï¼Œéœ€è¦ä» `.env.example` å¤åˆ¶å¹¶å¡«å…¥çœŸå®é…ç½®ã€‚

---

## ğŸš¦ æ•°æ®æ¨¡å‹

### 1. UserProfile (ç”¨æˆ·ç”»åƒ)
```python
{
  "user_id": str,           # ç”¨æˆ·ID
  "platform": str,          # å¹³å° (xhs/instagram)
  "nickname": str,          # æ˜µç§°
  "profile_summary": dict,  # ç”»åƒæ‘˜è¦
  "created_at": datetime,   # åˆ›å»ºæ—¶é—´
  "updated_at": datetime    # æ›´æ–°æ—¶é—´
}
```

### 2. UserSnapshot (ç”¨æˆ·å¿«ç…§)
```python
{
  "user_id": str,           # ç”¨æˆ·ID
  "platform": str,          # å¹³å°
  "snapshot_data": dict,    # å¿«ç…§æ•°æ®ï¼ˆå®Œæ•´ï¼‰
  "snapshot_date": datetime,# å¿«ç…§æ—¶é—´
  "note_count": int         # ç¬”è®°æ•°é‡
}
```

### 3. UserEmbedding (ç”¨æˆ·å‘é‡)
```python
{
  "user_id": str,           # ç”¨æˆ·ID
  "platform": str,          # å¹³å°
  "embedding_vector": list, # 512ç»´å‘é‡
  "embedding_model": str,   # æ¨¡å‹åç§°
  "created_at": datetime    # åˆ›å»ºæ—¶é—´
}
```

### 4. CreatorNetwork (åˆ›ä½œè€…ç½‘ç»œ)
```python
{
  "network_id": str,        # ç½‘ç»œID
  "platform": str,          # å¹³å°
  "similarity_matrix": dict,# ç›¸ä¼¼åº¦çŸ©é˜µ
  "creator_count": int,     # åˆ›ä½œè€…æ•°é‡
  "created_at": datetime    # åˆ›å»ºæ—¶é—´
}
```

### 5. StylePrompt (é£æ ¼æç¤ºè¯)
```python
{
  "prompt_id": str,         # æç¤ºè¯ID
  "prompt_name": str,       # æç¤ºè¯åç§°
  "prompt_template": str,   # æç¤ºè¯æ¨¡æ¿
  "variables": list,        # å˜é‡åˆ—è¡¨
  "created_at": datetime    # åˆ›å»ºæ—¶é—´
}
```

---

## ğŸ”„ è¯·æ±‚å“åº”æµç¨‹

### ç¤ºä¾‹ï¼šç”Ÿæˆ AI é£æ ¼å†…å®¹

```
1. ç”¨æˆ·æ“ä½œ
   Frontend: ç‚¹å‡»"ç”Ÿæˆå†…å®¹"æŒ‰é’®
   
2. HTTP è¯·æ±‚
   POST http://localhost:5001/api/styles/generate
   Body: { "user_id": "xxx", "topic": "æŠ¤è‚¤å¿ƒå¾—" }
   
3. è·¯ç”±åˆ†å‘
   FastAPI: style_router.py æ¥æ”¶è¯·æ±‚
   
4. ä¸šåŠ¡å¤„ç†
   StyleGenerationService.generate_style()
   â”œâ”€ è°ƒç”¨ UserProfileRepository.get_by_user_id()
   â”œâ”€ è°ƒç”¨ StylePromptRepository.get_default()
   â”œâ”€ æ„å»ºå®Œæ•´ Prompt
   â””â”€ è°ƒç”¨ DeepSeek API
   
5. æ•°æ®è®¿é—®
   UserProfileRepository
   â””â”€ MongoDB.user_profiles.find_one()
   
6. AI è¯·æ±‚
   DeepSeek API
   â””â”€ deepseek-chat æ¨¡å‹ç”Ÿæˆå†…å®¹
   
7. è¿”å›å“åº”
   FastAPI â†’ Frontend
   JSON: { "content": "ç”Ÿæˆçš„å†…å®¹...", "style": "..." }
   
8. ç•Œé¢å±•ç¤º
   Frontend: æ¸²æŸ“ç”Ÿæˆçš„å†…å®¹
```

---

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. åˆ†å±‚æ¶æ„ (Layered Architecture)
- **å±•ç¤ºå±‚**: Next.js (ç”¨æˆ·ç•Œé¢)
- **APIå±‚**: FastAPI (RESTfulæ¥å£)
- **ä¸šåŠ¡å±‚**: Service Classes (ä¸šåŠ¡é€»è¾‘)
- **æ•°æ®å±‚**: Repository Pattern (æ•°æ®è®¿é—®)
- **å­˜å‚¨å±‚**: MongoDB (æŒä¹…åŒ–)

### 2. å…³æ³¨ç‚¹åˆ†ç¦» (Separation of Concerns)
- æ¯å±‚åªè´Ÿè´£è‡ªå·±çš„èŒè´£
- å±‚ä¹‹é—´é€šè¿‡æ˜ç¡®çš„æ¥å£é€šä¿¡
- ä¾¿äºæµ‹è¯•å’Œç»´æŠ¤

### 3. ä¾èµ–æ³¨å…¥ (Dependency Injection)
```python
# FastAPI è‡ªåŠ¨ä¾èµ–æ³¨å…¥
def generate_style(
    request: StyleGenerateRequest,
    user_repo: UserProfileRepository = Depends(get_user_profile_repository)
):
    # user_repo è‡ªåŠ¨æ³¨å…¥
    profile = user_repo.get_by_user_id(request.user_id)
```

### 4. Repository Pattern (ä»“å‚¨æ¨¡å¼)
- å°è£…æ‰€æœ‰æ•°æ®è®¿é—®é€»è¾‘
- æä¾›ç»Ÿä¸€çš„æ•°æ®æ“ä½œæ¥å£
- ä¾¿äºåˆ‡æ¢æ•°æ®æº

### 5. é…ç½®å¤–éƒ¨åŒ–
- æ‰€æœ‰æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨ `.env`
- ä»£ç ä¸­é€šè¿‡ç¯å¢ƒå˜é‡è¯»å–
- ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®

---

## ğŸ”’ å®‰å…¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¯å¢ƒå˜é‡ç®¡ç†                             â”‚
â”‚  â”œâ”€ .env (æœ¬åœ°ï¼Œä¸ä¸Šä¼ )                  â”‚
â”‚  â”œâ”€ .env.example (æ¨¡æ¿ï¼Œå¯ä¸Šä¼ )          â”‚
â”‚  â””â”€ os.getenv() è¯»å–                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä»£ç å®‰å…¨                                 â”‚
â”‚  â”œâ”€ æ— ç¡¬ç¼–ç å¯†é’¥                          â”‚
â”‚  â”œâ”€ å¼ºåˆ¶ç¯å¢ƒå˜é‡éªŒè¯                      â”‚
â”‚  â””â”€ ValueError å¦‚æœç¼ºå°‘é…ç½®              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Git å®‰å…¨                                â”‚
â”‚  â”œâ”€ .gitignore æ’é™¤ .env                â”‚
â”‚  â”œâ”€ .gitignore æ’é™¤ .venv                â”‚
â”‚  â””â”€ security_check.sh æ£€æŸ¥               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ å¯æ‰©å±•æ€§è®¾è®¡

### 1. å¤šå¹³å°æ”¯æŒ
```python
# æ‰€æœ‰æ¨¡å‹éƒ½æœ‰ platform å­—æ®µ
{
  "platform": "xhs",  # æˆ– "instagram", "tiktok"
  "user_id": "xxx"
}
```

### 2. æ’ä»¶åŒ– Repository
```python
# è½»æ¾æ·»åŠ æ–°çš„æ•°æ®æº
class NewPlatformRepository:
    def __init__(self, db: Database):
        self.collection = db["new_platform_users"]
```

### 3. Service å±‚è§£è€¦
```python
# ä¸šåŠ¡é€»è¾‘ç‹¬ç«‹äºæ•°æ®è®¿é—®
class StyleGenerationService:
    def __init__(self, user_repo, prompt_repo):
        # å¯æ³¨å…¥ä»»ä½•å®ç°äº†æ¥å£çš„ Repository
```

---

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ
```
localhost:3000  â†’ Next.js Dev Server
localhost:5001  â†’ FastAPI + Uvicorn
Cloud           â†’ MongoDB Atlas
Cloud           â†’ DeepSeek API
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆè§„åˆ’ï¼‰
```
CDN             â†’ Next.js Static
Load Balancer   â†’ Nginx
App Servers     â†’ FastAPI (å¤šå®ä¾‹)
Cache           â†’ Redis
Database        â†’ MongoDB Atlas (Replica Set)
AI Service      â†’ DeepSeek API
Monitoring      â†’ Prometheus + Grafana
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [README.md](../README.md) - é¡¹ç›®æ€»è§ˆ
- [QUICKSTART_V2.md](./data-analysiter/docs/QUICKSTART_V2.md) - å¿«é€Ÿå¼€å§‹
- [ARCHITECTURE.md](./data-analysiter/docs/ARCHITECTURE.md) - è¯¦ç»†æ¶æ„
- [API_USAGE.md](./data-analysiter/docs/API_USAGE.md) - API æ–‡æ¡£
- [SECURITY_GUIDE.md](./SECURITY_GUIDE.md) - å®‰å…¨æŒ‡å—

---

## âœ… æ¶æ„éªŒè¯

- âœ… ä¸‰å±‚æ¶æ„æ¸…æ™°
- âœ… æ•°æ®æµå‘æ˜ç¡®
- âœ… èŒè´£åˆ†ç¦»åˆç†
- âœ… å¯æ‰©å±•æ€§è‰¯å¥½
- âœ… å®‰å…¨æ€§å®Œå–„
- âœ… æ–‡æ¡£å®Œæ•´

**æœ€åæ›´æ–°**: 2026-01-23
